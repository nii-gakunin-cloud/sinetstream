#!/bin/sh
# convert raw-result.txt (which is generated by stat.sh) to result.csv (which is read by dtree.py).
# log -(stat.sh)-> raw-result.txt -(result.sh)-> result.csv -(dtree.py)-> result.dot

awk '
BEGIN {
    print "writer,reader,algorithm,key_length,mode,padding,kd_algorithm,kd_salt_bytes,kd_iteration,kd_prf,result"
}
{
    gsub(/\+/, ",", $3)
    printf("%s,%s,%s,%s\n", $1, $2, $3, $5)
}' | awk -F, -vOFS=, '{ for (i = 1; i <= NF; i++) if ($i == "") $i = "-1"; print }'
